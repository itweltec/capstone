(("undefined"!=typeof self?self:this).webpackJsonp_thunderbolt_elements=("undefined"!=typeof self?self:this).webpackJsonp_thunderbolt_elements||[]).push([[353],{449:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(167),i=n(636),o=n(832);t.default=function(e){var t=r.createElement(i.a,Object(a.a)({id:e.id},e.meshProps),e.children);return r.createElement(o.a,Object(a.a)({},e,{mediaControls:t}))}},653:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n(2),r=n(600);function i(e){var t,n,i=e.playerRef,o=e.videoRef,u=e.audioSelector,d=e.isMobileView,s=e.autoplay,c=e.hasAudio,l=e.hasClick,v=e.hasRollIn,f=e.hasAudioRollIn,m=e.canClickPause,h=e.canRollPause,p=e.canReplay,w=e.extraMediaHandlers,b=void 0===w?{}:w;var g,y,E,C=!1,R=c,I=s||!l,k={handleEvent:function(e){var t=e.type,n=i.current;if("loadeddata"!==t||!n)return"ended"===t&&n?(p||(C=!0,n.dataset.stop=""),void delete n.dataset.playing):void(b[t]&&n&&b[t](n));n.dataset.canPlay=""}},A=function(e,t){var n=!t.muted;R=!n,t.muted=n,e.dataset.audio=n?"off":"on"},x=function(e){e.dataset.showAudio="",clearTimeout(y),y=window.setTimeout((function(){delete e.dataset.showAudio}),2e3)},M=function(e){clearTimeout(y),delete e.dataset.showAudio},L=function(e){e.volume=0,e.muted=!1;var t=0;window.clearInterval(g),g=window.setInterval((function(){(t+=.2)>=1?(e.volume=1,window.clearInterval(g)):e.volume=t}),200)},T=function(e){e.volume=1;var t=1;window.clearInterval(g),g=window.setInterval((function(){(t-=.2)<=0?(e.volume=0,e.muted=!0,window.clearInterval(g)):e.volume=t}),200)},_=Object(r.b)()&&"ontouchend"in window&&d;return{onClick:_||!c&&!l?void 0:function(e){n&&n.resume();var a=i.current,r=o.current;a&&r&&!C&&(c&&!t&&(t=a.querySelector(u)),c&&t&&(x(a),t.contains(e.target))?A(a,r):r.paused?(a.dataset.playing="",r.play(),I=!0):m&&(delete a.dataset.playing,r.pause()))},onMouseEnter:!_&&(c||v||l)?function(){var e=i.current,t=o.current;if(e&&t&&!C&&(v?t.play():l&&(e.dataset.rollIn=""),c&&I&&(x(e),R&&(f||v)))){var a=function(){e.dataset.audio="on",L(t)};if(n)if("running"===n.state)a();else{var r=n.resume();r&&r.then(a)}else t.muted=!1,e.dataset.audio="on"}}:void 0,onMouseLeave:!_&&(c||h||l)?function(){var e=i.current,t=o.current;e&&t&&(h?t.pause():l&&delete e.dataset.rollIn,c&&(M(e),f&&!t.muted&&(n?T(t):t.muted=!0)))}:void 0,onMouseMove:!_&&c?function(){var e=i.current;e&&c&&I&&x(e)}:void 0,onTouchEnd:_&&(c||l||v)?function(e){var n=i.current,a=o.current;if(n&&a&&!C){c&&!t&&(t=n.querySelector(u));var r=!s&&!n.dataset.touched,d="on"===n.dataset.touched;c&&(x(n),t&&t.contains(e.target))?A(n,a):((r||d)&&(a.paused?(n.dataset.playing="",a.play()):(m||h)&&(delete n.dataset.playing,a.pause())),(l||v)&&(clearTimeout(E),n.dataset.touched="on",E=window.setTimeout((function(){return n.dataset.touched="off"}),1400)))}}:void 0,mediaHandler:k,setAudioContext:function(){var e=window.AudioContext||window.webkitAudioContext;Object(r.b)()&&e&&o.current&&(n=new e)},MEDIA_EVENTS:Object(a.f)(Object.keys(b),["loadeddata","ended"])}}function o(e){var t=e.playerRef,n=e.videoRef,a=e.onViewEnter,i=e.onViewLeave;if(Object(r.b)()){var o={visible:!window.document.hidden,intersecting:!1},u=function(){n.current&&t.current&&"playing"in t.current.dataset&&(o.visible=!window.document.hidden,o.visible&&o.intersecting?n.current.play():n.current.pause())};window.document.addEventListener("visibilitychange",u);var d=null;return t.current&&"function"==typeof window.IntersectionObserver&&(d=new window.IntersectionObserver((function(e){var r=t.current,u=n.current;u&&r&&e.forEach((function(e){u&&e.target===r&&(o.intersecting=e.isIntersecting,o.visible&&o.intersecting?(null==a||a(),"playing"in r.dataset&&u.play()):(null==i||i(),u.pause()))}))}))).observe(t.current),function(){window.document.removeEventListener("visibilitychange",u),d&&(d.disconnect(),d=null)}}}},692:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l}));var a=n(677),r=n(697),i=n(600);a.Kampos.prototype.play=function(){var e=this;if(!this.animationFrameId){var t=function(){e.animationFrameId=window.requestAnimationFrame(t);var n=e.media;n&&n.readyState>=n.HAVE_CURRENT_DATA&&(!n.paused&&!n.ended||e._needsRedraw)&&(e._needsRedraw=!1,e.draw())};this.animationFrameId=window.requestAnimationFrame(t)}};var o=function(e){return{width:e&&e.videoWidth||0,height:e&&e.videoHeight/2||0,media:e}};function u(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1]:e}var d=function(e){void 0===e&&(e={});var t=[a.effects.transparentVideo()],n="brightness"in e,r="contrast"in e;if(n||r){var i=a.effects.brightnessContrast();n&&(i.brightness=e.brightness),r&&(i.contrast=e.contrast),t.push(i)}if(e.duotoneDark&&e.duotoneLight){var o=a.effects.duotone();o.dark=u(e.duotoneDark),o.light=u(e.duotoneLight),t.push(o)}var d="hue"in e,s="saturation"in e;if(d||s){var c=a.effects.hueSaturation();d&&(c.hue=e.hue),s&&(c.saturation=e.saturation),t.push(c)}return t},s=function(e){return e.readyState>=e.HAVE_CURRENT_DATA},c={count:0,set:new Set,add:function(e){return!!c.set.has(e)||!a.Kampos.preventContextCreation&&c.set.size<14&&(c.set.add(e),c.count=c.set.size,!0)},remove:function(e){c.set.delete(e),c.count=c.set.size}},l=function(){return Object(i.b)()&&r.b(window)}},693:function(e,t,n){"use strict";function a(e){var t=e.match(/.*svg\+xml,(.*)"\)$/);return t&&t[1]?window.decodeURIComponent(t[1]):""}function r(e){var t=e.svgContent,n=e.compId,a=e.alt,r=t.match(/(:?<\?xml[^?]*\?>)?(<svg[^>]*>)/);if(!r)return"";var i=r[1]?t.replace(r[1],""):t,o=window.document.createElement("div");o.innerHTML=i;var u=o.firstElementChild;if(!u)return"";var d="svg-content-"+n;u.setAttribute("id",d);var s=d+"-filter",c=d+"-mask";return'<svg ref="svg'+n+'" id="svg'+n+'" version="1.1" preserveAspectRatio="none" width="100%" height="100%" role="img" aria-label="'+a+'">\n      <defs>\n        <filter id="'+s+'">\n          <feColorMatrix\n            type="matrix"\n            values="0 0 0 0 1\n                    0 0 0 0 1\n                    0 0 0 0 1\n                    0 0 0 1 0"\n          />\n        </filter>\n        <mask id="'+c+'">\n          <use\n            filter="url(#'+s+')"\n            xlink:href="#'+d+'"\n            width="100%"\n            height="100%"\n            x="0"\n            y="0"\n          />\n        </mask>\n        '+o.innerHTML+'\n      </defs>\n      <image id="'+n+'image" ref="image"  mask="url(#'+c+')" width="100%" height="100%"/>\n    </svg>'}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}))},832:function(e,t,n){"use strict";var a=n(2),r=n(167),i=n(592),o=n.n(i),u=n(645),d=n(600),s=n(679),c=n(654),l=n.n(c),v=n(653),f=n(693),m=n(731),h=n(692),p=n(677),w=!Object(d.c)(),b=h.d();t.a=function(e){var t,n,i=e.id,d=e.mediaControls,c=e.fillLayers,g=e.isMobileView,y=e.hasAudio,E=e.hasClick,C=e.hasRollIn,R=e.hasAudioRollIn,I=e.canClickPause,k=e.canRollPause,A=e.muted,x=e.autoplay,M=e.canReplay,L=e.hasMask,T=e.animatePoster,_=e.filterEffect,O=e.alt,S=void 0===O?"":O,j=e.isTransparent,V=void 0!==j&&j,H=r.useRef(null),P=r.useRef(null),D=r.useRef(null),N=r.useRef(null),F=r.createRef(),q=!1,U=!1;function z(){P.current&&H.current&&(P.current.removeEventListener("seeked",z),H.current.dataset.showCanvas="",U=!0)}var K=r.useState(!V||!b),J=K[0],$=K[1],W=r.useState(L),B=W[0],G=W[1],Q=r.useState(!!V&&!J),X=Q[0],Y=Q[1],Z=!(!L||!w),ee={play:function(){delete ee.play,ve()}},te=Object(v.a)({playerRef:H,videoRef:P,audioSelector:'[data-audio-for="'+i+'"]',isMobileView:g,autoplay:x,hasAudio:y,hasClick:E,hasRollIn:C,hasAudioRollIn:R,canClickPause:I,canRollPause:k,canReplay:M,extraMediaHandlers:V?ee:void 0}),ne=te.onClick,ae=te.onMouseEnter,re=te.onMouseLeave,ie=te.onMouseMove,oe=te.onTouchEnd,ue=te.mediaHandler,de=te.setAudioContext,se=te.MEDIA_EVENTS;function ce(){H.current&&D.current&&(N.current&&N.current.hasContext||h.a.add(F)?(N.current?(N.current.lostContext&&N.current.restoreContext(),N.current.play(),!U&&N.current.media&&h.e(N.current.media)&&"playing"in H.current.dataset&&ve()):function(){try{N.current=new p.Kampos({target:D.current,effects:h.b(_||{}),onContextLost:function(){var e=N.current._source&&N.current._source.media;e&&(e.ended||e.paused)&&(N.current._needsRedraw=!0),le(),q&&ce()}})}catch(e){$(!1)}if(P.current){var e=function(){P.current&&(N.current.setSource(h.c(P.current)),ce(),P.current.removeEventListener("loadeddata",e,!1))};h.e(P.current)?e():P.current.addEventListener("loadeddata",e,!1)}}(),N.current.hasContext=!0):U&&H.current&&P.current&&(delete H.current.dataset.showCanvas,U=!1))}function le(){h.a.remove(F),N.current.hasContext=!1,N.current.stop()}function ve(){var e=P.current;H.current&&e&&N.current&&((e.paused||e.ended||N.current._needsRedraw)&&(N.current._needsRedraw=!1,N.current.draw()),e.addEventListener("seeked",z),e.currentTime=0)}function fe(){q=!0,ce()}function me(){q=!1,N.current&&N.current.hasContext&&le()}return Object(s.a)((function(){if(Y(Z),!(Z||V&&!J)){var e=P.current;if(V||y||E){var t=Object(v.b)({playerRef:H,videoRef:P,onViewEnter:V?fe:void 0,onViewLeave:V?me:void 0});return function(){null==t||t(),null==e||e.removeEventListener("seeked",z),N.current&&(N.current.destroy(),h.a.remove(F))}}}}),[V,H,P,J]),r.useEffect((function(){if(!V||J){var e=P.current;return se.forEach((function(t){e&&!Z&&("loadeddata"===t&&e.readyState>=e.HAVE_CURRENT_DATA?ue.handleEvent({type:t}):e.addEventListener(t,ue))})),de&&!Z&&de(),function(){se.forEach((function(t){e&&e.removeEventListener(t,ue)}))}}}),[V,J,P,de,ue,se,Z]),Object(s.a)((function(){var e=H.current;if(Z&&c.video&&e){var t=window.getComputedStyle(e),n=Object(f.b)(t.getPropertyValue("--mask-image"));c.video.posterImageInfo.maskDataElementString=Object(f.a)({svgContent:n,compId:i,alt:c.video.posterImageInfo.alt||S}),c.video.isVideoEnabled=!1,G(!1)}}),[S,i,c.video,Z]),r.createElement("div",{id:i,ref:H,className:o()(l.a.videobox,(t={},t[l.a.masked]=B,t)),onClick:J&&!X?ne:void 0,onMouseEnter:J&&!X?ae:void 0,onMouseLeave:J&&!X?re:void 0,onMouseMove:J&&!X?ie:void 0,onTouchEnd:J&&!X?oe:void 0,"data-audio":A?"off":"on","data-has-play":J&&!X&&(E||C)?"":void 0,"data-playing":J&&!X&&x?"":void 0,"data-stop":J&&!X?void 0:"","data-animate-poster":V?T:void 0,"data-has-alpha":V?"true":void 0},r.createElement("div",{className:o()(l.a.videoboxContainer,(n={},n[l.a.hasCanvas]=V,n))},r.createElement(u.a,Object(a.a)({},c,{videoRef:P,extraClass:l.a.videoboxFill})),V&&r.createElement("canvas",{id:i+"webglcanvas",ref:D,className:o()(l.a.alphaCanvas,l.a.videoboxFill,"webglcanvas"),"aria-label":S,role:"presentation","data-testid":m.a.canvas})),J&&!X?d:null)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements/dist/VideoBox.c33c1809.chunk.min.js.map